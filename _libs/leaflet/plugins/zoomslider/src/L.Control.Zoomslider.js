L.Control.Zoomslider=function(){var t=L.Draggable.extend({initialize:function(t,o,i){L.Draggable.prototype.initialize.call(this,t,t),this._element=t,this._stepHeight=o,this._knobHeight=i,this.on("predrag",function(){this._newPos.x=0,this._newPos.y=this._adjust(this._newPos.y)},this)},_adjust:function(t){var o=Math.round(this._toValue(t));return o=Math.max(0,Math.min(this._maxValue,o)),this._toY(o)},_toY:function(t){return this._k*t+this._m},_toValue:function(t){return(t-this._m)/this._k},setSteps:function(t){var o=t*this._stepHeight;this._maxValue=t-1,this._k=-this._stepHeight,this._m=o-(this._stepHeight+this._knobHeight)/2},setPosition:function(t){L.DomUtil.setPosition(this._element,L.point(0,this._adjust(t)))},setValue:function(t){this.setPosition(this._toY(t))},getValue:function(){return this._toValue(L.DomUtil.getPosition(this._element).y)}}),o=L.Control.extend({options:{position:"topleft",stepHeight:8,knobHeight:6,styleNS:"leaflet-control-zoomslider"},onAdd:function(o){return this._map=o,this._ui=this._createUI(),this._knob=new t(this._ui.knob,this.options.stepHeight,this.options.knobHeight),o.whenReady(this._initKnob,this).whenReady(this._initEvents,this).whenReady(this._updateSize,this).whenReady(this._updateKnobValue,this).whenReady(this._updateDisabled,this),this._ui.bar},onRemove:function(t){t.off("zoomlevelschange",this._updateSize,this).off("zoomend zoomlevelschange",this._updateKnobValue,this).off("zoomend zoomlevelschange",this._updateDisabled,this)},_createUI:function(){var t={},o=this.options.styleNS;return t.bar=L.DomUtil.create("div",o+" leaflet-bar"),t.zoomIn=this._createZoomBtn("in","top",t.bar),t.wrap=L.DomUtil.create("div",o+"-wrap leaflet-bar-part",t.bar),t.zoomOut=this._createZoomBtn("out","bottom",t.bar),t.body=L.DomUtil.create("div",o+"-body",t.wrap),t.knob=L.DomUtil.create("div",o+"-knob"),L.DomEvent.disableClickPropagation(t.bar),L.DomEvent.disableClickPropagation(t.knob),t},_createZoomBtn:function(t,o,i){var e=this.options.styleNS+"-"+t+" leaflet-bar-part"+" leaflet-bar-part-"+o,n=L.DomUtil.create("a",e,i);return n.href="#",n.title="Zoom "+t,L.DomEvent.on(n,"click",L.DomEvent.preventDefault),n},_initKnob:function(){this._knob.enable(),this._ui.body.appendChild(this._ui.knob)},_initEvents:function(){this._map.on("zoomlevelschange",this._updateSize,this).on("zoomend zoomlevelschange",this._updateKnobValue,this).on("zoomend zoomlevelschange",this._updateDisabled,this),L.DomEvent.on(this._ui.body,"click",this._onSliderClick,this),L.DomEvent.on(this._ui.zoomIn,"click",this._zoomIn,this),L.DomEvent.on(this._ui.zoomOut,"click",this._zoomOut,this),this._knob.on("dragend",this._updateMapZoom,this)},_onSliderClick:function(t){var o=t.touches&&1===t.touches.length?t.touches[0]:t,i=L.DomEvent.getMousePosition(o,document.body).y-L.DomUtil.getViewportOffset(this._ui.body).y;this._knob.setPosition(i),this._updateMapZoom()},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_zoomLevels:function(){var t=this._map.getMaxZoom()-this._map.getMinZoom()+1;return 1/0>t?t:0},_toZoomLevel:function(t){return t+this._map.getMinZoom()},_toValue:function(t){return t-this._map.getMinZoom()},_updateSize:function(){var t=this._zoomLevels();this._ui.body.style.height=this.options.stepHeight*t+"px",this._knob.setSteps(t)},_updateMapZoom:function(){this._map.setZoom(this._toZoomLevel(this._knob.getValue()))},_updateKnobValue:function(){this._knob.setValue(this._toValue(this._map.getZoom()))},_updateDisabled:function(){var t=this._map.getZoom(),o=this.options.styleNS+"-disabled";L.DomUtil.removeClass(this._ui.zoomIn,o),L.DomUtil.removeClass(this._ui.zoomOut,o),t===this._map.getMinZoom()&&L.DomUtil.addClass(this._ui.zoomOut,o),t===this._map.getMaxZoom()&&L.DomUtil.addClass(this._ui.zoomIn,o)}});return o}(),L.Map.mergeOptions({zoomControl:!1,zoomsliderControl:!0}),L.control.zoomslider=function(t){return new L.Control.Zoomslider(t)};
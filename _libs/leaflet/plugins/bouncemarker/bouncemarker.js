!function(){var t=L.Marker.prototype.onAdd;L.Marker.mergeOptions({bounceOnAdd:!1,bounceOnAddOptions:{duration:1e3,height:-1},bounceOnAddCallback:function(){}}),L.Marker.include({_toPoint:function(t){return this._map.latLngToContainerPoint(t)},_toLatLng:function(t){return this._map.containerPointToLatLng(t)},_animate:function(t){var n=new Date,o=setInterval(function(){var i=new Date-n,e=i/t.duration;e>1&&(e=1);var s=t.delta(e);t.step(s),1===e&&(t.end(),clearInterval(o))},t.delay||10)},_move:function(t,n,o){var i=L.latLng(this._orig_latlng),e=this._drop_point.y,s=this._drop_point.x,a=this._point.y-e,r=this;this._animate({delay:10,duration:n||1e3,delta:t,step:function(t){r._drop_point.y=e+a*t-(r._map.project(r._map.getCenter()).y-r._orig_map_center.y),r._drop_point.x=s-(r._map.project(r._map.getCenter()).x-r._orig_map_center.x),r.setLatLng(r._toLatLng(r._drop_point))},end:function(){r.setLatLng(i),"function"==typeof o&&o()}})},_easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounce:function(t,n){"function"==typeof t&&(n=t,t=null),t=t||{duration:1e3,height:-1},"number"==typeof t&&(t.duration=arguments[0],t.height=arguments[1]),this._orig_map_center=this._map.project(this._map.getCenter()),this._drop_point=this._getDropPoint(t.height),this._move(this._easeOutBounce,t.duration,n)},_getDropPoint:function(t){this._point=this._toPoint(this._orig_latlng);var n;return n=void 0===t||0>t?this._toPoint(this._map.getBounds()._northEast).y:this._point.y-t,new L.Point(this._point.x,n)},onAdd:function(n){this._map=n,this._orig_latlng=this._latlng,this.options.bounceOnAdd===!0&&("undefined"!=typeof this.options.bounceOnAddDuration&&(this.options.bounceOnAddOptions.duration=this.options.bounceOnAddDuration),"undefined"!=typeof this.options.bounceOnAddHeight&&(this.options.bounceOnAddOptions.height=this.options.bounceOnAddHeight),this._drop_point=this._getDropPoint(this.options.bounceOnAddOptions.height),this.setLatLng(this._toLatLng(this._drop_point))),t.call(this,n),this.options.bounceOnAdd===!0&&this.bounce(this.options.bounceOnAddOptions,this.options.bounceOnAddCallback)}})}();
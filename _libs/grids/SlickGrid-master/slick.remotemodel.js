define(["jquery","_libs/grids/SlickGrid-master/slick.core","_libs/grids/SlickGrid-master/slick.dataview"],function(t,e){function r(){function r(){}function a(t,e){for(var r=t;e>=r;r++)if(void 0==d[r]||null==d[r])return!1;return!0}function n(){for(var t in d)delete d[t];d.length=0}function o(e,r){if(b){b.abort();for(var a=b.fromPage;a<=b.toPage;a++)d[a*u]=void 0}0>e&&(e=0),d.length>0&&(r=Math.min(r,d.length-1));for(var n=Math.floor(e/u),o=Math.floor(r/u);void 0!==d[n*u]&&o>n;)n++;for(;void 0!==d[o*u]&&o>n;)o--;if(n>o||n==o&&void 0!==d[n*u])return D.notify({from:e,to:r}),void 0;var s="http://api.thriftdb.com/api.hnsearch.com/items/_search?filter[fields][type][]=submission&q="+v+"&start="+n*u+"&limit="+((o-n)*u+u);null!=h&&(s+="&sortby="+h+(m>0?"+asc":"+desc")),null!=g&&clearTimeout(g),g=setTimeout(function(){for(var a=n;o>=a;a++)d[a*u]=null;p.notify({from:e,to:r}),b=t.jsonp({url:s,callbackParameter:"callback",cache:!0,success:l,error:function(){i(n,o)}}),b.fromPage=n,b.toPage=o},50)}function i(t,e){alert("error loading pages "+t+" to "+e)}function l(t){var e=t.request.start,r=e+t.results.length;d.length=Math.min(parseInt(t.hits),1e3);for(var a=0;a<t.results.length;a++){var n=t.results[a].item;n.create_ts=n.create_ts.replace(/^(\d+)-(\d+)-(\d+)T(\d+:\d+:\d+)Z$/,"$2/$3/$1 $4 UTC"),n.create_ts=new Date(n.create_ts),d[e+a]=n,d[e+a].index=e+a}b=null,D.notify({from:e,to:r})}function s(t,e){for(var r=t;e>=r;r++)delete d[r];o(t,e)}function c(t,e){h=t,m=e,n()}function f(t){v=t,n()}var u=50,d={length:0},v="",h=null,m=1,g=null,b=null,p=new e.Event,D=new e.Event;return r(),{data:d,clear:n,isDataLoaded:a,ensureData:o,reloadData:s,setSort:c,setSearch:f,onDataLoading:p,onDataLoaded:D}}return t.extend(e.Data,{RemoteModel:r}),e});
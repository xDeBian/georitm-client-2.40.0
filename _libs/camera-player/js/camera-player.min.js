!function(){function t(t){console.log("$f.fireEvent",[].slice.call(t))}function e(t){if(!t||"object"!=typeof t)return t;var n=new t.constructor;for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function n(t,e){if(t){var n,i=0,s=t.length;if(void 0===s){for(n in t)if(e.call(t[n],n,t[n])===!1)break}else for(var o=t[0];s>i&&e.call(o,i,o)!==!1;o=t[++i]);return t}}function i(t){return document.getElementById(t)}function s(t,e,i){return"object"!=typeof e?t:(t&&e&&n(e,function(e,n){i&&"function"==typeof n||(t[e]=n)}),t)}function o(t){var e=t.indexOf(".");if(-1!=e){var i=t.slice(0,e)||"*",s=t.slice(e+1,t.length),o=[];return n(document.getElementsByTagName(i),function(){this.className&&-1!=this.className.indexOf(s)&&o.push(this)}),o}}function r(t){return t=t||window.event,t.preventDefault?(t.stopPropagation(),t.preventDefault()):(t.returnValue=!1,t.cancelBubble=!0),!1}function a(t,e,n){t[e]=t[e]||[],t[e].push(n)}function l(t){return t.replace(/&amp;/g,"%26").replace(/&/g,"%26").replace(/=/g,"%3D")}function u(){return"_"+(""+Math.random()).slice(2,10)}function c(o,c,d){function g(){function t(t){return!/iPad|iPhone|iPod/i.test(navigator.userAgent)||/.flv$/i.test(E[0].url)||e()?(x.isLoaded()||x._fireEvent("onBeforeClick")===!1||x.load(),r(t)):!0}function e(){return x.hasiPadSupport&&x.hasiPadSupport()}function i(){""!==v.replace(/\s/g,"")?o.addEventListener?o.addEventListener("click",t,!1):o.attachEvent&&o.attachEvent("onclick",t):(o.addEventListener&&!e()&&o.addEventListener("click",r,!1),x.load())}$f(o)?($f(o).getParent().innerHTML="",b=$f(o).getIndex(),p[b]=x):(p.push(x),b=p.length-1),C=parseInt(o.style.height,10)||o.clientHeight,_=o.id||"fp"+u(),y=c.id||_+"_api",c.id=y,v=o.innerHTML,"string"==typeof d&&(d={clip:{url:d}}),d.playerId=_,d.clip=d.clip||{},o.getAttribute("href",2)&&!d.clip.url&&(d.clip.url=o.getAttribute("href",2)),d.clip.url&&(d.clip.url=l(d.clip.url)),m=new h(d.clip,-1,x),d.playlist=d.playlist||[d.clip];var s=0;n(d.playlist,function(){var t=this;"object"==typeof t&&t.length&&(t={url:""+t}),t.url&&(t.url=l(t.url)),n(d.clip,function(e,n){void 0!==n&&void 0===t[e]&&"function"!=typeof n&&(t[e]=n)}),d.playlist[s]=t,t=new h(t,s,x),E.push(t),s++}),n(d,function(t,e){"function"==typeof e&&(m[t]?m[t](e):a(k,t,e),delete d[t])}),n(d.plugins,function(t,e){e&&(P[t]=new f(t,e,x))}),d.plugins&&void 0!==d.plugins.controls||(P.controls=new f("controls",null,x)),P.canvas=new f("canvas",null,x),v=o.innerHTML,setTimeout(i,0)}var v,m,_,y,b,w,T,C,x=this,S=null,$=!1,E=[],P={},k={};if(s(x,{id:function(){return _},isLoaded:function(){return null!==S&&void 0!==S.fp_play&&!$},getParent:function(){return o},hide:function(t){return t&&(o.style.height="0px"),x.isLoaded()&&(S.style.height="0px"),x},show:function(){return o.style.height=C+"px",x.isLoaded()&&(S.style.height=T+"px"),x},isHidden:function(){return x.isLoaded()&&0===parseInt(S.style.height,10)},load:function(t){if(!x.isLoaded()&&x._fireEvent("onBeforeLoad")!==!1){var e=function(){v&&!flashembed.isSupported(c.version)&&(o.innerHTML=""),t&&(t.cached=!0,a(k,"onLoad",t)),flashembed(o,c,{config:d})},i=0;n(p,function(){this.unload(function(){++i==p.length&&e()})})}return x},unload:function(t){if(""!==v.replace(/\s/g,"")){if(x._fireEvent("onBeforeUnload")===!1)return t&&t(!1),x;$=!0;try{S&&(S.fp_isFullscreen()&&S.fp_toggleFullscreen(),S.fp_close(),x._fireEvent("onUnload"))}catch(e){}var n=function(){S=null,o.innerHTML=v,$=!1,t&&t(!0)};/WebKit/i.test(navigator.userAgent)&&!/Chrome/i.test(navigator.userAgent)?setTimeout(n,0):n()}else t&&t(!1);return x},getClip:function(t){return void 0===t&&(t=w),E[t]},getCommonClip:function(){return m},getPlaylist:function(){return E},getPlugin:function(t){var e=P[t];if(!e&&x.isLoaded()){var n=x._api().fp_getPlugin(t);n&&(e=new f(t,n,x),P[t]=e)}return e},getScreen:function(){return x.getPlugin("screen")},getControls:function(){return x.getPlugin("controls")._fireEvent("onUpdate")},getLogo:function(){try{return x.getPlugin("logo")._fireEvent("onUpdate")}catch(t){}},getPlay:function(){return x.getPlugin("play")._fireEvent("onUpdate")},getConfig:function(t){return t?e(d):d},getFlashParams:function(){return c},loadPlugin:function(t,e,n,i){"function"==typeof n&&(i=n,n={});var s=i?u():"_";x._api().fp_loadPlugin(t,e,n,s);var o={};o[s]=i;var r=new f(t,null,x,o);return P[t]=r,r},getState:function(){return x.isLoaded()?S.fp_getState():-1},play:function(t,e){var n=function(){void 0!==t?x._api().fp_play(t,e):x._api().fp_play()};return x.isLoaded()?n():$?setTimeout(function(){x.play(t,e)},50):x.load(function(){n()}),x},getVersion:function(){var t="flowplayer.js @VERSION";if(x.isLoaded()){var e=S.fp_getVersion();return e.push(t),e}return t},_api:function(){if(!x.isLoaded())throw"Flowplayer "+x.id()+" not loaded when calling an API method";return S},setClip:function(t){return n(t,function(e,n){"function"==typeof n?(a(k,e,n),delete t[e]):"onCuepoint"==e&&$f(o).getCommonClip().onCuepoint(t[e][0],t[e][1])}),x.setPlaylist([t]),x},getIndex:function(){return b},bufferAnimate:function(t){return S.fp_bufferAnimate(void 0===t||t),x},_swfHeight:function(){return S.clientHeight}}),n("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,ClipAdd,Fullscreen*,FullscreenExit,Error,MouseOver,MouseOut".split(","),function(){var t="on"+this;if(-1!=t.indexOf("*")){t=t.slice(0,t.length-1);var e="onBefore"+t.slice(2);x[e]=function(t){return a(k,e,t),x}}x[t]=function(e){return a(k,t,e),x}}),n("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,toggleFullscreen,reset,close,setPlaylist,addClip,playFeed,setKeyboardShortcutsEnabled,isKeyboardShortcutsEnabled".split(","),function(){var t=this;x[t]=function(e,n){if(!x.isLoaded())return x;var i=null;return i=void 0!==e&&void 0!==n?S["fp_"+t](e,n):void 0===e?S["fp_"+t]():S["fp_"+t](e),"undefined"===i||void 0===i?x:i}}),x._fireEvent=function(e){"string"==typeof e&&(e=[e]);var s=e[0],o=e[1],r=e[2],a=e[3],l=0;if(d.debug&&t(e),x.isLoaded()||"onLoad"!=s||"player"!=o||(S=S||i(y),T=x._swfHeight(),n(E,function(){this._fireEvent("onLoad")}),n(P,function(t,e){e._fireEvent("onUpdate")}),m._fireEvent("onLoad")),"onLoad"!=s||"player"==o){if("onError"==s&&("string"==typeof o||"number"==typeof o&&"number"==typeof r)&&(o=r,r=a),"onContextMenu"==s)return n(d.contextMenu[o],function(t,e){e.call(x)}),void 0;if("onPluginEvent"!=s&&"onBeforePluginEvent"!=s){if("onPlaylistReplace"==s){E=[];var u=0;n(o,function(){E.push(new h(this,u++,x))})}if("onClipAdd"==s){if(o.isInStream)return;for(o=new h(o,r,x),E.splice(r,0,o),l=r+1;l<E.length;l++)E[l].index++}var c=!0;if("number"==typeof o&&o<E.length){w=o;var f=E[o];f&&(c=f._fireEvent(s,r,a)),f&&c===!1||(c=m._fireEvent(s,r,a,f))}return n(k[s],function(){return c=this.call(x,o,r),this.cached&&k[s].splice(l,1),c===!1?!1:(l++,void 0)}),c}var p=o.name||o,g=P[p];if(g)return g._fireEvent("onUpdate",o),g._fireEvent(r,e.slice(3))}},"string"==typeof o){var M=i(o);if(!M)throw"Flowplayer cannot access element: "+o;o=M,g()}else g()}function d(t){this.length=t.length,this.each=function(e){n(t,e)},this.size=function(){return t.length};var e=this;for(name in c.prototype)e[name]=function(){var t=arguments;e.each(function(){this[name].apply(this,t)})}}var h=function(t,e,i){var o=this,r={},l={};if(o.index=e,"string"==typeof t&&(t={url:t}),s(this,t,!0),n("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop".split(","),function(){var t="on"+this;if(-1!=t.indexOf("*")){t=t.slice(0,t.length-1);var n="onBefore"+t.slice(2);o[n]=function(t){return a(l,n,t),o}}o[t]=function(e){return a(l,t,e),o},-1==e&&(o[n]&&(i[n]=o[n]),o[t]&&(i[t]=o[t]))}),s(this,{onCuepoint:function(t,n){if(1==arguments.length)return r.embedded=[null,t],o;"number"==typeof t&&(t=[t]);var s=u();return r[s]=[t,n],i.isLoaded()&&i._api().fp_addCuepoints(t,e,s),o},update:function(t){s(o,t),i.isLoaded()&&i._api().fp_updateClip(t,e);var n=i.getConfig(),r=-1==e?n.clip:n.playlist[e];s(r,t,!0)},_fireEvent:function(t,a,u,c){if("onLoad"==t)return n(r,function(t,n){n[0]&&i._api().fp_addCuepoints(n[0],e,t)}),!1;if(c=c||o,"onCuepoint"==t){var d=r[a];if(d)return d[1].call(i,c,u)}a&&-1!="onBeforeBegin,onMetaData,onMetaDataChange,onStart,onUpdate,onResume".indexOf(t)&&(s(c,a),a.metaData&&(c.duration?c.fullDuration=a.metaData.duration:c.duration=a.metaData.duration));var h=!0;return n(l[t],function(){h=this.call(i,c,a,u)}),h}}),t.onCuepoint){var c=t.onCuepoint;o.onCuepoint.apply(o,"function"==typeof c?[c]:c),delete t.onCuepoint}n(t,function(e,n){"function"==typeof n&&(a(l,e,n),delete t[e])}),-1==e&&(i.onCuepoint=this.onCuepoint)},f=function(t,e,i,o){var r=this,a={},l=!1;o&&s(a,o),n(e,function(t,n){"function"==typeof n&&(a[t]=n,delete e[t])}),s(this,{animate:function(n,s,o){if(!n)return r;if("function"==typeof s&&(o=s,s=500),"string"==typeof n){var l=n;n={},n[l]=s,s=500}if(o){var c=u();a[c]=o}return void 0===s&&(s=500),e=i._api().fp_animate(t,n,s,c),r},css:function(n,o){if(void 0!==o){var a={};a[n]=o,n=a}return e=i._api().fp_css(t,n),s(r,e),r},show:function(){return this.display="block",i._api().fp_showPlugin(t),r},hide:function(){return this.display="none",i._api().fp_hidePlugin(t),r},toggle:function(){return this.display=i._api().fp_togglePlugin(t),r},fadeTo:function(e,n,s){if("function"==typeof n&&(s=n,n=500),s){var o=u();a[o]=s}return this.display=i._api().fp_fadeTo(t,e,n,o),this.opacity=e,r},fadeIn:function(t,e){return r.fadeTo(1,t,e)},fadeOut:function(t,e){return r.fadeTo(0,t,e)},getName:function(){return t},getPlayer:function(){return i},_fireEvent:function(e,o){if("onUpdate"==e){var u=i._api().fp_getPlugin(t);if(!u)return;s(r,u),delete r.methods,l||(n(u.methods,function(){var e=""+this;r[e]=function(){var n=[].slice.call(arguments),s=i._api().fp_invoke(t,e,n);return"undefined"===s||void 0===s?r:s}}),l=!0)}var c=a[e];if(c){var d=c.apply(r,o);return"_"==e.slice(0,1)&&delete a[e],d}return r}})},p=[];window.flowplayer=window.$f=function(){var t=null,r=arguments[0];if(!arguments.length)return n(p,function(){return this.isLoaded()?(t=this,!1):void 0}),t||p[0];if(1==arguments.length)return"number"==typeof r?p[r]:"*"==r?new d(p):(n(p,function(){return this.id()==r.id||this.id()==r||this.getParent()==r?(t=this,!1):void 0}),t);if(arguments.length>1){var a=arguments[1],l=3==arguments.length?arguments[2]:{};if("string"==typeof a&&(a={src:a}),a=s({bgcolor:"#000000",version:[10,1],expressInstall:"http://releases.flowplayer.org/swf/expressinstall.swf",cachebusting:!1},a),"string"==typeof r){if(-1!=r.indexOf(".")){var u=[];return n(o(r),function(){u.push(new c(this,e(a),e(l)))}),new d(u)}var h=i(r);return new c(null!==h?h:e(r),e(a),e(l))}if(r)return new c(r,e(a),e(l))}return null},s(window.$f,{fireEvent:function(){var t=[].slice.call(arguments),e=$f(t[0]);return e?e._fireEvent(t.slice(1)):null},addPlugin:function(t,e){return c.prototype[t]=e,$f},each:n,extend:s}),"function"==typeof jQuery&&(jQuery.fn.flowplayer=function(t,n){if(!arguments.length||"number"==typeof arguments[0]){var i=[];return this.each(function(){var t=$f(this);t&&i.push(t)}),arguments.length?i[arguments[0]]:new d(i)}return this.each(function(){$f(this,e(t),n?e(n):{})})})}(),!function(){function t(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function e(t,e){var n=[];for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function n(e,n,o){if(l.isSupported(n.version))e.innerHTML=l.getHTML(n,o);else if(n.expressInstall&&l.isSupported([6,65]))e.innerHTML=l.getHTML(t(n,{src:n.expressInstall}),{MMredirectURL:encodeURIComponent(location.href),MMplayerType:"PlugIn",MMdoctitle:document.title});else if(e.innerHTML.replace(/\s/g,"")||(e.innerHTML="<h2>Flash version "+n.version+" or greater is required</h2><h3>"+(u[0]>0?"Your version is "+u:"You have no flash plugin installed")+"</h3>"+("A"==e.tagName?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+s+"'>here</a></p>"),("A"==e.tagName||"DIV"==e.tagName)&&(e.onclick=function(){location.href=s})),n.onFail){var r=n.onFail.call(this);"string"==typeof r&&(e.innerHTML=r)}i&&(window[n.id]=document.getElementById(n.id)),t(this,{getRoot:function(){return e},getOptions:function(){return n},getConf:function(){return o},getApi:function(){return e.firstChild}})}var i=document.all,s="http://get.adobe.com/flashplayer",o="function"==typeof jQuery,r=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,a={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}}),window.flashembed=function(e,i,s){return"string"==typeof e&&(e=document.getElementById(e.replace("#",""))),e?("string"==typeof i&&(i={src:i}),new n(e,t(t({},a),i),s)):void 0};var l=t(window.flashembed,{conf:a,getVersion:function(){var t,e,n;try{n=navigator.plugins["Shockwave Flash"],null!=n[0].enabledPlugin&&(e=n.description.slice(16))}catch(i){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),e=t&&t.GetVariable("$version")}catch(s){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),e=t&&t.GetVariable("$version")}catch(o){}}}return e=r.exec(e),e?[1*e[1],1*1*e[1*e[1]>9?2:3]]:[0,0]},asString:function(t){if(null===t||void 0===t)return null;var n=typeof t;switch("object"==n&&t.push&&(n="array"),n){case"string":return t=t.replace(new RegExp('(["\\\\])',"g"),"\\$1"),t=t.replace(/^\s?(\d+\.?\d*)%/,"$1pct"),'"'+t+'"';case"array":return"["+e(t,function(t){return l.asString(t)}).join(",")+"]";case"function":return'"function()"';case"object":var i=[];for(var s in t)t.hasOwnProperty(s)&&i.push('"'+s+'":'+l.asString(t[s]));return"{"+i.join(",")+"}"}return String(t).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(e,n){e=t({},e);var s='<object width="'+e.width+'" height="'+e.height+'" id="'+e.id+'" name="'+e.id+'"';e.cachebusting&&(e.src+=(-1!=e.src.indexOf("?")?"&":"?")+Math.random()),s+=e.w3c||!i?' data="'+e.src+'" type="application/x-shockwave-flash"':' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',s+=">",(e.w3c||i)&&(s+='<param name="movie" value="'+e.src+'" />'),e.width=e.height=e.id=e.w3c=e.src=null,e.onFail=e.version=e.expressInstall=null;for(var o in e)e[o]&&(s+='<param name="'+o+'" value="'+e[o]+'" />');var r="";if(n){for(var a in n)if(n[a]){var u=n[a];r+=a+"="+(/function|object/.test(typeof u)?l.asString(u):u)+"&"}r=r.slice(0,-1),s+='<param name="flashvars" value=\''+r+"' />"}return s+="</object>"},isSupported:function(t){return u[0]>t[0]||u[0]==t[0]&&u[1]>=t[1]}}),u=l.getVersion();o&&(jQuery.tools=jQuery.tools||{version:"@VERSION"},jQuery.tools.flashembed={conf:a},jQuery.fn.flashembed=function(t,e){return this.each(function(){$(this).data("flashembed",flashembed(this,t,e))})})}(),!function(t){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};String.prototype.ucFirst||(String.prototype.ucFirst=function(){return this.charAt(0).toUpperCase()+this.substr(1)});var n=0,i={};i.merge=function(){return t.extend.apply(t,arguments)},i.merge(i,{extend:function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype},include:function(t,e){i.each(e,function(e,n){!function(e,n){t[n]=function(){return e.apply(this,arguments)}}(e,n)})},uniqueId:function(t){var e=++n;return String(null===t?"":t)+e},keys:function(t){var e="function"==typeof Object.keys?Object.keys:null;return e?e(t):[]},each:function(t,n){var s=-1,o=t?t.length:0;if("number"==typeof o)for(;++s<o&&n(t[s],s)!==!1;);else{var r=-1,a=e[typeof t]&&i.keys(t);for(o=a?a.length:0;++r<o;)if(s=a[r],n(t[s],s,t)===!1)return t}return t},indexBy:function(t,e){for(var n,i={},s=t.length;s--;)"undefined"!=typeof t[s][e]&&(n=t[s][e],("number"==typeof n||"string"==typeof n)&&("number"==typeof n&&(n=String(n)),n in i?"array"==typeof i[n]?i[n].push(t[s]):i[n]=[i[n],t[s]]:i[n]=t[s]));return i},proxy:function(t,e,n){i.each(t,function(t){!function(t){e[t]=function(){if("string"==typeof n){var e=this[n]||null;if(e&&e[t])return e[t].apply(e,arguments)}else if(t in n)return n[t].apply(this,arguments)}}(t)})},throttle:function(t,e,n){var i,s;return n=n||window,function o(){var r=arguments;return i?void(s=!0):(i=!0,setTimeout(function(){i=!1,s&&(o.apply(n,r),s=!1)},e),void t.apply(n,r))}},padLeft:function(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}});var s={types:["hls","flv"]};s.testProp=function(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},i.merge(s,{TRANSFORM:s.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION:s.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"])});var o=navigator.userAgent.toLowerCase(),r="undefined"!=typeof window.orientation,a=-1!==o.search("android [23]"),l=document.documentElement,u="ActiveXObject"in window,c=u&&"transition"in l.style,d="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!a,h="MozPerspective"in l.style,f="OTransition"in l.style,p=window.navigator&&window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints&&!window.PointerEvent,g=(window.PointerEvent&&window.navigator.pointerEnabled&&window.navigator.maxTouchPoints||p,{touch:"ontouchstart"in document.documentElement,any3d:c||d||h||f,webkit3d:d,android:-1!==o.indexOf("android"),android23:a,mobileOpera:r&&window.opera}),v={support:s,browser:g,utils:i,cssPrefix:"cp",dataPrefix:"cp",instances:{},constants:{DAY:864e5,HOUR:36e5,MINUTE:6e4}};window.cplayer=v}(jQuery),function(t){function e(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(s.test(n)){for(var r=n.split(s),a=0,l=r.length;l>a;a++)t[e].apply(t,[r[a]].concat(i));return!1}return!0}function n(t,e){var n,i=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,o,r);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,o,r,a);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e);return}}var i=t.utils,s=/\s+/,o={listenTo:"on",listenToOnce:"once"},r={on:function(t,n,i){if(!e(this,"on",t,[n,i])||!n)return this;this._events||(this._events={});var s=this._events[t]||(this._events[t]=[]);return s.push({callback:n,context:i,ctx:i||this}),this},off:function(t,n,s){var o,r,a,l,u,c,d,h;if(!this._events||!e(this,"off",t,[n,s]))return this;if(!t&&!n&&!s)return this._events=void 0,this;for(l=t?[t]:i.keys(this._events),u=0,c=l.length;c>u;u++)if(t=l[u],a=this._events[t]){if(this._events[t]=o=[],n||s)for(d=0,h=a.length;h>d;d++)r=a[d],(n&&n!==r.callback&&n!==r.callback._callback||s&&s!==r.context)&&o.push(r);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var i=Array.prototype.slice.call(arguments,1);if(!e(this,"trigger",t,i))return this;var s=this._events[t];return s&&n(s,i),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var o=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var r in s)t=s[r],t.off(e,n,this),!o&&t._events&&i.keys(t._events).length||delete this._listeningTo[r];return this}};i.each(o,function(t,e){r[e]=function(e,n,s){var o=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=i.uniqueId("l"));return o[r]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),t.Events=r,i.include(t,r)}(window.cplayer),function(t,e,n){var i,s=e.documentElement,o=null,r=null,a="",l="",u="",c="",d="";if(s.requestFullScreen?r="":s.mozRequestFullScreen?r="moz":s.webkitRequestFullScreen&&"https:"==window.location.protocol&&(r="webkit"),null!==r)a=r+(r?"R":"r")+"equestFullScreen",l=r+(r?"C":"c")+"ancelFullScreen",u=r+(r?"F":"f")+"ullscreenElement",c=r+(r?"F":"f")+"ullscreenEnabled",d=r+"fullscreenchange",i={request:function(t){t&&t[a]()},cancel:function(){e[l]()},enabled:function(){return c?e[c]:!1},getElement:function(){return u?e[u]:null},getEventName:function(){return d}};else{var h=n.cssPrefix+"-fullscreen";i={request:function(n){var i=this;o&&this.cancel(),o=n,t(n).addClass(h).trigger("fullscreenchange"),t(e).one("keyup.cpfullscreen",function(t){27==t.keyCode&&i.cancel()})},cancel:function(){if(o){var n=t(o);o=null,n.removeClass(h).trigger("fullscreenchange"),t(e).off("keyup.cpfullscreen")}},enabled:function(){return null!==o},getElement:function(){return o},getEventName:function(){return"fullscreenchange"}}}n.Fullscreen=i}(jQuery,window.document,window.cplayer),function(t,e){var n=e.browser,i={DOWN_EVENT:n.touch?"touchstart":"mousedown",UP_EVENT:n.touch?"touchend":"mouseup",MOVE_EVENT:n.touch?"touchmove":"mousemove",ENTER_EVENT:n.touch?"touchstart":"mouseenter",LEAVE_EVENT:n.touch?"touchend":"mouseleave",CE:(n.touch,"click"),DBLCE:(n.touch,"dblclick"),getPosition:function(t,e){if(!e)return[t.clientX,t.clientY];var n=e.getBoundingClientRect();return[t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop]}};e.Pointer=i}(jQuery,window.cplayer),function(t,e){function n(e,n){this.$container=t(e),this.$el=null,this.disabled=!1,this.options=i.merge(!0,{},this.constructor.defaults,n),this._events={},this._eventsNs="."+this.options.eventsNs,this.create()}var i=e.utils,s=e.cssPrefix;n.defaults={debug:!1,eventsNs:"cp"},i.merge(n.prototype,{create:function(){this.disabled&&this.$el.addClass(s+"-disabled"),this.$el&&this.$el.appendTo(this.$container),this._i()},destroy:function(){this.$el&&this.$el.remove(),this.$el=null},_i:function(){},_td:function(t){if(this._ts("disabled",t)){var e=this.$el[0];return"BUTTON"==e.tagName&&(e.disabled=t),!0}return!1},_ta:function(t){return this._ts("active",t)},_tl:function(t){return this._ts("loading",t)},_ts:function(t,e){return t in this&&("undefined"==typeof e||e!=this[t])?(e="undefined"!=typeof e?e:!this[t],this[t]=e,this.$el[e?"addClass":"removeClass"](s+"-"+t),!0):!1}}),i.include(n.prototype,e.Events),e.W=n}(jQuery,window.cplayer),function(t,e){function n(t,n,i){this.player=t,e.W.call(this,n,i)}var i=e.utils,s=i.merge,o=(e.cssPrefix,e.W.prototype);n.defaults=s({},e.W.defaults,{tagName:"div",cssClass:""}),i.extend(n,e.W),i.merge(n.prototype,{create:function(){this.disabled=!0,this.$el=t(this._rme()),o.create.apply(this,arguments)},_rme:function(t){var e=this.options,n=[e.cssClass],s=[],o=[],r="<"+e.tagName;return e.addClass&&n.push(e.addClass),o[0]='class="'+n.join(" ")+'"',e.attrs&&i.each(e.attrs,function(t,e){s.push(e+'="'+t+'"')}),r+=" "+o.join(" ")+">",t&&(r+=t),r+="</"+e.tagName+">"},_i:function(){var t=this;this.listenTo(this.player,"engineload",function(){t._bee()}).listenTo(this.player,"engineunload",function(e){t.stopListening(e)})},_bee:function(){}}),e.Control=n}(jQuery,window.cplayer),function(t,e){function n(e,n){this.$container=t(e),this.options=i.merge({},this.constructor.defaults,n),this.create()}var i=e.utils;n.defaults={},i.merge(n.prototype,{create:function(){},play:function(){},pause:function(){},destroy:function(){}}),i.include(n.prototype,e.Events),e.Engine=n}(jQuery,window.cplayer),function(t,e){function n(){this._fp=null,e.Engine.apply(this,arguments)}var i=e.utils,s=i.merge,o=-1,r=0,a=1,l=3,u=4,c=e.Engine.prototype;n.defaults=s({},e.Engine.defaults,{wmode:"opaque"}),i.extend(n,e.Engine),i.merge(n.prototype,{create:function(){var t=this._gfc(),e=this._getPlayerConf();this._fp=$f(this.$container[0],t,e),this._bindFpEvents()},destroy:function(){this._fp&&(this._fp.unload(),this._fp=null),c.destroy.apply(this.arguments)},isStarted:function(){if(!this._fp)return!1;var t=this._fp.getState();return t!=o&&t!=r&&t!=a},isPlaying:function(){if(!this._fp)return!1;var t=this._fp.getState();return t===l},isPaused:function(){if(!this._fp)return!1;var t=this._fp.getState();return t===u},setClip:function(t){t=this._prepareClip(t),this._fp.setClip(t)},_gfc:function(){return{src:this.options.swfFolder+"/"+this.options.playerSwf,wmode:this.options.wmode}},_getPlayerConf:function(){var t=this.options.clip,e={controls:null};t=this._prepareClip(t),"hls"==t.type?e.flashls={url:this.options.swfFolder+"/flashlsFlowPlayer.swf",hls_maxbufferlength:20}:"flv"==t.type;var n={clip:t,showErrors:this.options.debug,canvas:{background:"transparent none no-repeat 0 0",backgroundGradient:"none",border:"0 none"},play:{opacity:0},plugins:e,debug:this.options.debug};return n},_prepareClip:function(t){return i.merge(t,{scaling:"fit",accelerated:"direct"==this.options.wmode}),"hls"==t.type?i.merge(t,{provider:"flashls",urlResolvers:"flashls"}):"flv"==t.type,t.live&&(t.bufferLength=0,t.autoBuffering=!1),t},_bindFpEvents:function(){var t=this,e=this._fp;e.onLoad(function(){t.trigger("engineload")}),e.onBeforeBegin(function(e){t.trigger("beforestartload",e)}),e.onBegin(function(){t.trigger("startload",!0)}),e.onStart(function(e){t.trigger("play",!0,e)}),e.onPause(function(e){t.trigger("pause",!1,e)}),e.onResume(function(e){t.trigger("resume",!0,e)}),e.onSeek(function(e,n){t.trigger("seek",e,n)}),e.onBufferFull(function(e){t.trigger("bufferfull",e)}),e.onBufferEmpty(function(e){t.trigger("bufferempty",e)}),e.onBeforeStop(function(e){t.trigger("stop",!1,e)}),e.onStop(function(e){t.trigger("stop",!1,e)}),e.onFinish(function(e){t.trigger("finish",e)}),e.onUnload(function(){}),e.onError(function(e,n){t.trigger("error",e,n)})}}),i.proxy(["play","pause","resume","stop","stopBuffering","close","getState","getStatus"],n.prototype,"_fp"),e.EF=n}(jQuery,window.cplayer),function(t,e){function n(){e.Control.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.Control.prototype;n.defaults=s({},e.Control.defaults,{tagName:"button",cssClass:o+"-btn",addClass:""}),i.extend(n,e.Control),i.merge(n.prototype,{create:function(){r.create.apply(this,arguments)},destroy:function(){r.destroy.apply(this,arguments)},_rme:function(t){return"undefined"==typeof t&&(t="",this.options.icon&&(t+='<i class="'+o+"-icon "+o+"-icon-"+this.options.icon+'"></i>'),this.options.text&&(t+='<span class="'+o+'-text">'+this.options.text+"</span>")),r._rme.call(this,t)}}),e.Button=n}(jQuery,window.cplayer),function(t,e){function n(){this.playing=!1,e.Button.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.Button.prototype;n.defaults=s({},e.Button.defaults,{}),i.extend(n,e.Button),i.merge(n.prototype,{_rme:function(){var t='<i class="'+o+"-icon "+e.cssPrefix+'-icon-pause"></i>';return t+='<i class="'+o+"-icon "+e.cssPrefix+'-icon-play"></i>',this.options.addClass+=" "+o+"-"+(this.playing?"pause":"play"),r._rme.call(this,t)},_i:function(){var t=this;r._i.apply(this,arguments),this.$el.on(e.Pointer.CE+this._eventsNs,function(e){return t._onClick(e)})},_onClick:function(t){if(this.disabled)return!1;var e=t.originalEvent;if("detail"in e&&e.detail>1)return!1;var n=this.player.getEngine();return n[this.playing?"pause":n.isStarted()?"resume":"play"](),!1},_bee:function(){var t=this,e=this.player.getEngine();r._bee.apply(this,arguments),this.listenTo(e,"startload",function(){t._td(!0)}).listenTo(e,"play",function(){t._td(!1)}).listenTo(e,"play resume pause",function(e){t._toggle(e)}).listenTo(e,"stop",function(e,n){n.live?t._toggle(!1):t._td(!0)}).listenTo(e,"bufferfull",function(n){n.live&&(t._td(!1),t._toggle(e.isPlaying()))}).listenTo(e,"error",function(){t._td(!0),t._toggle(!1)})},_toggle:function(t){("indefined"==typeof t||t!=this.playing)&&(t="undefined"!=typeof t?t:!this.playing,this.playing=t,this.$el.removeClass(t?o+"-play":o+"-pause").addClass(t?o+"-pause":o+"-play"))}}),e.ButtonPlayPause=n}(jQuery,window.cplayer),function(t,e){function n(){e.ButtonPlayPause.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.ButtonPlayPause.prototype;n.defaults=s({},e.ButtonPlayPause.defaults,{tagName:"div",cssClass:o+"-overlay-control",dblclick:null,dblclickDelay:300}),i.extend(n,e.ButtonPlayPause),i.merge(n.prototype,{_i:function(){if(r._i.apply(this,arguments),"function"==typeof this.options.dblclick){var t=this,n=e.Pointer.CE+this._eventsNs,i=0;this.$el.off(n).on(n,function(e){return i&&clearTimeout(i),i=setTimeout(function(){t._onClick(e)},t.options.dblclickDelay),!1}).on(e.Pointer.DBLCE+this._eventsNs,function(n){i&&clearTimeout(i),t.options.dblclick(n,e.Pointer.getPosition(n,t.$el[0]))})}},_rme:function(){var t='<i class="'+o+"-icon "+e.cssPrefix+'-icon-pause"></i>';return t+='<i class="'+o+"-icon "+e.cssPrefix+'-icon-play"></i>',this.options.addClass+=" "+o+"-"+(this.playing?"pause":"play"),e.Control.prototype._rme.call(this,t)}}),e.OverlayControl=n}(jQuery,window.cplayer),function(t,e){function n(){this.active=!1,e.Button.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.Button.prototype;n.defaults=s({},e.Button.defaults,{cssClass:o+"-btn "+o+"-btn-live",icon:"camera",text:"Online"}),i.extend(n,e.Button),i.merge(n.prototype,{_rme:function(){var t='<i class="'+o+"-icon "+e.cssPrefix+'-icon-camera"></i>';return t+='<i class="'+o+"-icon "+e.cssPrefix+'-icon-reload"></i>',this.options.text&&(t+='<span class="'+o+'-text">'+this.options.text+"</span>"),this.options.addClass+=this.active?" "+o+"-active":"",r._rme.call(this,t)},_i:function(){var t=this;r._i.apply(this,arguments),this.$el.on(e.Pointer.CE+this._eventsNs,function(){return t.disabled?!1:(t.trigger("start"),!1)}),this.listenTo(this.player,"sourcechange",function(e){e.live||t._ta(!1)})},_bee:function(){var t=this,e=this.player.getEngine();r._bee.apply(this,arguments),this.listenTo(e,"startload",function(){t._td(!0)}).listenTo(e,"play",function(){t._td(!1),t.player.getSource().live&&t._ta(!0)}).listenTo(e,"bufferfull",function(){t._td(!1),t.player.getSource().live&&t._ta(e.isPlaying())}).listenTo(e,"pause stop resume",function(){t._ta(!1)}).listenTo(e,"error",function(){var e=t.player.getSource();t._td(e.live),t._ta(!1)})}}),e.ButtonLive=n}(jQuery,window.cplayer),function(t,e){function n(){this.expanded=!1,e.Button.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.Pointer,a=e.Button.prototype;n.defaults=s({},e.Button.defaults,{}),i.extend(n,e.Button),i.merge(n.prototype,{_rme:function(){var t='<i class="'+o+"-icon "+e.cssPrefix+'-icon-expand"></i>';return t+='<i class="'+o+"-icon "+e.cssPrefix+'-icon-collapse"></i>',this.options.addClass+=" "+o+"-btn-"+(this.expanded?"collapse":"expand"),a._rme.call(this,t)},_i:function(){var t=this;a._i.apply(this,arguments),this.listenTo(this.player,"engineload",function(){t._td(!1)}).listenTo(this.player,"fullscreen",function(e){t._toggle(e)}),this.$el.on(r.CE+this._eventsNs,function(){return t.disabled?!1:(t.player.toggleFullscreen(),!1)})},_toggle:function(t){t="undefined"!=typeof t?t:!this.expanded,this.expanded=t,this.$el.removeClass(t?o+"-btn-expand":o+"-btn-collapse").addClass(t?o+"-btn-collapse":o+"-btn-expand")}}),e.ButtonFullscreen=n}(jQuery,window.cplayer),function(t,e){function n(){this.opened=!1,this.$dropdown=null,this.$text=null,e.Button.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.Button.prototype;n.defaults=s({},e.Button.defaults,{speed:1,values:[1,2,4,8,16,32,64],addClass:"cp-disabled"}),i.extend(n,e.Button),i.merge(n.prototype,{create:function(){r.create.apply(this,arguments)},_rme:function(){var t,e='<span class="'+o+'-text">'+this.options.speed+"</span>",n=this.options.values,i=n.length;for(n.length,e+='<ul class="'+o+'-dropdown">';i--;)t=n[i],e+='<li data-speed="'+t+'"'+(t==this.options.speed?' class="'+o+'-selected"':"")+">"+t+"</li>";return e+="</ul>",this.options.addClass+=" "+o+"-btn-speed "+o+"-dropdown-wrapper",r._rme.call(this,e)},_i:function(){var n=this;r._i.apply(this,arguments),this.$dropdown=this.$el.find("."+o+"-dropdown"),this.$text=this.$el.find("."+o+"-text"),this.$dropdown.on(e.Pointer.CE+this._eventsNs,">li",function(){if(n.disabled)return!1;var e=t(this),i=o+"-selected",s=e.data("speed");return n.$text.text(s),n.$dropdown.find("."+i).removeClass(i),e[0].className=i,n.player.setSpeed(s),!1
})},_bee:function(){var t=this,e=this.player.getEngine();r._bee.apply(this,arguments),this.listenTo(e,"startload",function(){t._td(!0)}).listenTo(e,"play",function(){t.player.getSource().live||t._td(!1)}).listenTo(e,"stop error",function(){t._td(!0)})},_toggle:function(t){("indefined"==typeof t||t!=this.playing)&&(t="undefined"!=typeof t?t:!this.playing,this.playing=t,this.$el.removeClass(t?o+"-btn-play":o+"-btn-pause").addClass(t?o+"-btn-pause":o+"-btn-play"))}}),e.ButtonSpeed=n}(jQuery,window.cplayer),function(t,e){function n(){this.active=!1,this.loading=!1,this.$content=null,e.Control.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.Control.prototype;n.defaults=s({},e.Control.defaults,{cssClass:o+"-splash"}),i.extend(n,e.Control),s(n.prototype,{_rme:function(){return this.disabled=!1,r._rme.call(this,'<div class="'+o+'-content"></div>')},_i:function(){var t=this;this.$content=this.$el.find("."+o+"-content"),r._i.apply(this,arguments),this.listenTo(this.player,"engineload",function(){t._td(!1)})},_bee:function(){var t=this,e=this.player.getEngine();r._bee.apply(this,arguments),this.listenTo(e,"engineload",function(){}).listenTo(e,"beforestartload",function(){t._ta(!0),t._tl(!0),t.$content.text("")}).listenTo(e,"startload",function(){}).listenTo(e,"play",function(){t._ta(!1),t._tl(!1)}).listenTo(e,"error",function(e){t._ta(!0),t._tl(!1);var n=t.player.getErrorContent(e);n&&t.$content.text(n)})}}),e.Content=n}(jQuery,window.cplayer),function(t,e){function n(){r.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.Control,a=r.prototype;n.defaults=s({},r.defaults,{cssClass:o+"-time-ind",format:null,dblclick:null,dblclickDelay:300}),i.extend(n,r),s(n.prototype,{_i:function(){a._i.apply(this,arguments),this._bindEvents()},_bindEvents:function(){var t=this,n=this.player;this.listenTo(n,"update",function(e){var n="";e.playTime&&(n=t._format(e.playTime)),t.$el.html(n)}),this.$el.on(e.Pointer.CE,function(){if(t.disabled)return!1;var e=n.getPlayTime();e>0&&n.controls.timeline&&n.controls.timeline.setCenter(e)})},_bee:function(){var t=this,e=this.player.getEngine();this.listenTo(e,"play stop",function(e){t._td(!e)})},_update:function(){var t=this.player.getEngine();this._td(!t.isPlaying())},_format:function(t){var e="";return t>0&&(e="function"==typeof this.options.format?this.options.format(t,this.player):"<strong>"+this.player.formatTime(t,!0)+"</strong> "+this.player.formatDate(t)),e}}),e.TimeIndicator=n}(jQuery,window.cplayer),function(t,e){function n(){this.$back=null,this.$forward=null,this.$dpCont=null,this.$dp=null,this._timeline=null,this._shown=!1,this._hasDataDays={},a.apply(this,arguments)}var i=e.utils,s=i.merge,o=e.cssPrefix,r=e.Pointer,a=e.Control,l=a.prototype;n.defaults=s({},a.defaults,{cssClass:o+"-datepicker",format:null,dblclick:null,dblclickDelay:300}),i.extend(n,a),s(n.prototype,{_rme:function(){var t=this.player.formatDate(+new Date),n='<button class="'+o+"-btn "+o+"-disabled "+o+'-dp-pan" data-direction="back"><i class="'+o+"-icon "+o+'-icon-chevron-double-left"></i></button>';return n+='<div class="'+o+"-btn "+o+"-btn-dp "+o+'-disabled"><i class="'+o+"-icon "+o+'-icon-calendar"></i><span class="'+o+'-text">'+t+"</span></div>",n+='<div class="'+o+"-dp-cont "+o+'-hidden"><span class="'+o+'-hidden">'+t+"</span></div>",n+='<button class="'+o+"-btn "+o+"-disabled "+o+'-dp-pan" data-direction="forward"><i class="'+o+"-icon "+o+'-icon-chevron-double-right"></i></button>',e.Control.prototype._rme.call(this,n)},_i:function(){var t=this;l._i.apply(this,arguments);var e=this.$el;this.$back=e.find("."+o+'-btn[data-direction="back"]'),this.$forward=e.find("."+o+'-btn[data-direction="forward"]'),this.$dp=e.find("."+o+"-btn-dp"),this.$dpText=this.$dp.find("."+o+"-text"),this.$dpCont=e.find("."+o+"-dp-cont"),t.listenTo(this.player,"layoutready",function(){t._timeline=t.player.controls.timeline,t._iW(),t._bindEvents()})},_bindEvents:function(){var n=this,i=this._timeline;this.listenTo(i,"viewreset",function(){n._update()}).listenTo(i,"changedisabled",function(t){t?n.$back.add(n.$forward).add(n.$dp).addClass(o+"-disabled").prop("disabled",!0):(n.$dp.removeClass(o+"-disabled").prop("disabled",!1),n._update())}),this.$back.add(n.$forward).on(r.CE,function(){if(i.disabled||this.disabled)return!1;var n=t(this).data("direction"),s="forward"==n?1:-1,o=i.getDayStart(i.getCenter()),r=o+s*e.constants.DAY,a=new Date(r).setHours(12),l=i.getCurrentTime();a="forward"==n?Math.min(l,a):Math.max(i.getMinTime(),a),i.setCenter(a)})},_iW:function(){var t=this,e=this._timeline,n=0,i=0,s=this._hasDataDays;this.$dp.on(r.CE,function(e){if(this.disabled)return!1;e.stopPropagation();var n=-1==t.$dpCont[0].className.indexOf("hidden");t.$dpCont[n?"addClass":"removeClass"](o+"-hidden"),n||t._loadDays(t.$dpCont.data("datepicker"))});var a={maxDate:new Date,disabled:!1,showOtherMonths:!1,beforeShowDay:function(t){var e="";return s&&t.getTime()in s&&(e=o+"-hl"),[!0,e,""]},onChangeMonthYear:function(e,n,i){t._loadDays(i)},onSelect:function(n){var i=new Date,s=new Date(n);s.setHours(12),e.setCenter(s>i?i:s),t.$dpCont.addClass(o+"-hidden")},onClose:function(){n=0,i=0,t.$dpCont.find(".ui-datepicker").removeClass(o+"-loading")}};null!==e.options.minTime&&(a.minDate=new Date(e.getMinTime())),this.$dpCont.datepicker(a)},_update:function(){var t=this._timeline,e=t.getCenter();e&&(this.$dpCont.datepicker("setDate",new Date(e)),this.$dpText.text(t.formatDate(e)));var n=this.$dpCont.datepicker("getDate");if(t.disabled)this.$back.addClass(o+"-disabled").prop("disabled",!0);else if(null!==t.options.minTime){var i=t.getMinTime(),s=new Date(t.getDayStart(i)),r=s>=n;this.$back[r?"addClass":"removeClass"](o+"-disabled").prop("disabled",r)}else this.$back.removeClass(o+"-disabled").prop("disabled",!1);var a=new Date(t.getDayStart(t.getCurrentTime())),l=t.disabled||n>=a;this.$forward[l?"addClass":"removeClass"](o+"-disabled").prop("disabled",l)},_loadDays:function(e){var n=this._timeline;if("function"==typeof n.options.days){var i=this,s=this._hasDataDays,r=e.dpDiv;r.addClass(o+"-loading");var a=new Date(e.drawYear,e.drawMonth,1),l=new Date(e.drawYear,e.drawMonth+1,1);n.loadDays(a.getTime(),l.getTime()).done(function(e){t.extend(s,e),i.$dpCont.datepicker("refresh")}).always(function(){r.removeClass(o+"-loading")})}}}),e.Datepicker=n}(jQuery,window.cplayer),function(t,e){function n(){this.loading=!1,this.$future=null,this.$wrapper=null,this.$canvasCont=null,this.$tip=null,this.$tipContent=null,this.$ph=null,this.$phContent=null,this.$controls=null,this.controls={canvas:null,pan:null,zoom:null,find:null},this._wheelHandler=null,this._loaded=!1,this._ranges=null,this._rangesInt=null,this._rangesCache={},this._daysCache={},this._zoom=1,this._animatingZoom=!1,this._animateToZoom=0,this._center=null,this._msppx=0,this._size=null,this._sizeChanged=!1,this._restoreTimeout=null,e.Control.apply(this,arguments)}function i(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}function s(t,e){this.timeline=t,this.disabled=!1,this.$container=e,this._i()}function o(){this._cns=null,this._ctx=null,this._frame=null,s.apply(this,arguments)}function r(){this.$back=null,this.$forward=null,s.apply(this,arguments)}function a(){this.$zoomIn=null,this.$zoomOut=null,s.apply(this,arguments)}function l(){this.$el=null,s.apply(this,arguments)}function u(t,e){this.timeline=t,this.$el=e,this._delta=0,this._startTime=0,this._lastMousePos=0,this._timer=null;var n=t._eventsNs,i=["wheel"+n];"onwheel"in document||(i=["mousewheel"+n,"DomMouseScroll"+n,"MozMousePixelScroll"+n]),this._events=i.join(" "),this._i()}var c=e.utils,d=c.extend,h=c.merge,f=c.each,p=c.include,g=e.cssPrefix,v=e.dataPrefix+"-tl",m=e.support,_=e.browser,y=_.touch,b=e.Pointer,w=e.constants.DAY,T=e.constants.HOUR,C=e.constants.MINUTE,x=C,S=e.Control.prototype;c.extend(n,e.Control),n.defaults=h({},e.Control.defaults,{cssClass:g+"-timeline",center:null,ranges:null,minTime:null,zoomLevels:[w,12*T,6*T,4*T,3*T,2*T,T,T/2,T/4],zoomAnimation:!0,timeLabelsHeight:14,timeLabelsPadding:1,timeLabelsFontSize:11,timeLabelsTextPaddingVert:1,timeLabelsTextPaddingHor:3,rangeColor:"#0077b3",timeLabelsLineColor:"#000000",timeLabelsTextColor:"#000000",loadingRangesText:"Archive loading...",controls:{pan:{},zoom:{},find:{}}}),c.merge(n.prototype,{setView:function(t,e){return e=void 0===e?this.getZoom():e,t instanceof Date&&(t=Math.round(t.getTime())),this._resetView(t,Math.min(this.options.zoomLevels.length,Math.max(e,1))),this},getCanvasSize:function(){if(null===this._size||this._sizeChanged){var t=this.$wrapper[0];this._size=new i(t.clientWidth,t.clientHeight),this._sizeChanged=!1}return this._size},getCenter:function(){return this._center},setCenter:function(t){return this.setView(t),this},getMinTime:function(){var t=this.options.minTime;return t instanceof Date?Math.round(t.getTime()):t},getMinShownTime:function(){return this._center-this.getSizeInMs()/2},getMaxShownTime:function(){return this._center+this.getSizeInMs()/2},getZoom:function(){return this._zoom},setZoom:function(t){return t=Math.min(this.options.zoomLevels.length,Math.max(t,1)),t!=this.getZoom()&&this.setView(this.getCenter(),t),this},setZoomAround:function(t,e){if(e=Math.min(this.options.zoomLevels.length,Math.max(e,1)),e!=this.getZoom()){var n=this.canvasXToTime(t),i=this.getCanvasSize(),s=this.options.zoomLevels[e-1],o=s/i.x,r=n-t*o,a=r+s/2;this.setView(a,e)}return this},getSizeInMs:function(){return this.options.zoomLevels[this.getZoom()-1]},getCurrentTime:function(){return(new Date).getTime()},getDayStart:function(t){var e=t instanceof Date?t:new Date(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()},loadRanges:function(e,n){e=e||this.getMinShownTime(),n=n||this.getMaxShownTime();var i=new t.Deferred,s=this,o=this._rangesCache,r=this.getDayStart(e),a=(new Date).getTime(),l=this.getDayStart(n),u=null,c=!0;return l>a&&(l=r),r in o&&(u=o[r],l>r?l in o?(u=u.concat(o[l]),c=!1):r=l:c=!1),c?this.options.ranges(r,l+w).done(function(t){var e=[];if(t.length){e=s._mergeCloseRanges(t);for(var n,a=e.length,u=-1;u++<a-1;)n=s.getDayStart(e[u][0]),o[n]=o[n]||[],o[n].push([e[u][0],e[u][1]])}else o[r]=[],l>r&&(o[l]=[]);i.resolve(e)}).fail(function(){i.reject(arguments[0])}).always(function(){!s._rangesInt&&n>=s.getCurrentTime()&&s._startOnlineRangesUpdate()}):i.resolve(u),i},_mergeCloseRanges:function(t){for(var e,n=[],i=t.length,s=0,o=0,r=t[0].slice(0);s++<i-1;)e=t[s],o=e[0]-r[1],o>1?(n.push(r),r=e.slice(0)):r[1]=e[1];return n.push(r),n},loadDays:function(e,n){var i=new t.Deferred,s=this._daysCache,o=(new Date).getTime(),r={};if(n>o&&(n=this.getDayStart(o)+w),e in s){for(var a=e;n>a;a+=w)a in s&&1==s[a]&&(r[a]=1);return i.resolve(r)}return this.options.days(e,n).done(function(t){for(var o=e;n>o;o+=w)s[o]=o in t?1:0;i.resolve(t)}).fail(function(){i.reject()}),i},getShownRanges:function(){return this._ranges||[]},getRangeIndex:function(t){var e=this.getShownRanges(),n=e.length;if(!n||t>e[n-1][1]||t<e[0][0])return-1;for(var i,s=-1;n--;)if(i=e[n],i[0]<=t&&i[1]>t){s=n;break}return s},timeToCanvasX:function(t){var e=(this._center,this.getMinShownTime());return(t-e)/this._msppx},canvasXToTime:function(t){return Math.round(this.getMinShownTime()+t*this._msppx)},pointerEventToTime:function(t){var e=b.getPosition(t,this.$wrapper[0]),n=e[0];return this.canvasXToTime(n)},destroy:function(){var t=this;this._clearRestoreTimeout(),f(this.controls,function(e,n){e&&e.destroy(),t.controls[n]=null}),this._rangesInt&&(clearInterval(this._rangesInt),this._rangesInt=null),this._wheelHandler&&this._wheelHandler.destroy(),S.destroy.apply(this,arguments)},_rme:function(){var t=this.options,e="",n=g+"-timeline";return y&&(t.cssClass+=" "+g+"-touch"),e='<div class="'+n+'-underlay"><div class="'+n+'-ranges-underlay"></div><div class="'+n+'-future-underlay"></div></div>',e+='<div class="'+n+'-wrapper">',e+='<div class="'+n+'-objects">',e+='<div class="'+n+'-canvas"></div>',e+='<div class="'+n+"-ph "+g+'-hidden"><div class="'+n+'-ph-content"></div></div>',e+="</div>",e+='<div class="'+n+"-tip "+g+'-hidden"><div class="'+n+'-tip-content"></div></div>',e+="</div>",e+='<div class="'+n+'-overlay">'+t.loadingRangesText+"</div>",e+='<div class="'+n+'-controls"></div>',S._rme.call(this,e)},_i:function(){var t=this.options;S._i.apply(this,arguments),t.zoomAnimation=t.zoomAnimation&&m.TRANSITION&&_.any3d&&!_.android23&&!_.mobileOpera,this.$future=this.$el.find("."+g+"-timeline-future-underlay"),this.$wrapper=this.$el.find("."+g+"-timeline-wrapper"),this.$canvasCont=this.$el.find("."+g+"-timeline-canvas"),this.$tip=this.$wrapper.find("."+g+"-timeline-tip"),this.$tipContent=this.$tip.find(">div"),this.$ph=this.$wrapper.find("."+g+"-timeline-ph"),this.$phContent=this.$tip.find(">div"),this.$controls=this.$el.find("."+g+"-timeline-controls"),this._buildControls(),t.center&&void 0!==t.zoom&&this.setView(t.center,t.zoom,{reset:!0}),this._bindUIEvents(),this._bindEvents()},_buildControls:function(){this.options.controls,this.controls.canvas=new o(this,this.$canvasCont),this.controls.pan=new r(this,this.$el)},_bindEvents:function(){var t=this,e=this.player;this.listenTo(e,"resize",function(){t._sizeChanged=!0;var e=t.getCanvasSize();t._msppx=t.getSizeInMs()/e.x}).listenTo(e,"sourcechange",function(e,n){!n.live&&e.live&&t.setCenter(t.getCurrentTime())}).listenTo(e,"update",function(e){if(e.playTime){t._setPlayHeadPosition(e.playTime),t._setFutureSize();var n=t.getRangeIndex(e.playTime);-1!=n||t.player.getSource().live||t._moveToNextRange(e.playTime)}else t.$ph.addClass(g+"-hidden")}),this.on("viewreset",function(){t._setPlayHeadPosition()})},_bee:function(){var t=this,e=this.player,n=e.getEngine();S._bee.apply(this,arguments),this.listenTo(n,"startload",function(){t._td(!0)}).listenTo(n,"play error",function(){t._td(!1)}).listenTo(n,"play stop",function(e){t.$ph[e?"removeClass":"addClass"](g+"-hidden"),e&&t._setPlayHeadPosition()}).listenTo(n,"bufferempty",function(n){if(!n.live){var i=e.getPlayTime(),s=t.getRangeIndex(i);-1==s?t._moveToNextRange(i):t._restoreTimeout=setTimeout(function(){t._restorePlayback(i)},3e3)}}).listenTo(n,"bufferfull",function(e){e.live||t._clearRestoreTimeout()}).listenTo(n,"finish",function(){})},_bindUIEvents:function(){var t=this;this.$wrapper.on(b.CE,function(e){t._onRangesClick(e)}),this.$wrapper.on(b.ENTER_EVENT,function(e){t.$tip.removeClass(g+"-hidden"),t._buildTip(e),t.$wrapper.on(b.MOVE_EVENT+".cptltip",function(e){t._buildTip(e)})}).on(b.LEAVE_EVENT,function(){t.$tip.addClass(g+"-hidden"),t.$wrapper.off(".cptltip")}),this._wheelHandler=new u(this,this.$wrapper)},_resetView:function(t,e){var n=this,i=(this._zoom!==e,this.getCanvasSize());this._zoom=e,this._center=t,this._msppx=this.getSizeInMs()/i.x,this._loaded=!0,this._setFutureSize(),this._ts("loading",!0),this.loadRanges().done(function(t){n._ranges=t,n.trigger("viewreset")}).fail(function(){}).always(function(){n._ts("loading",!1)})},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set timeline center and zoom first.")},_moved:function(){var t=this._getWrapperPos();return t&&0!==t.x},_getWrapperPos:function(){return this.$wrapper.data(v+"-pos")},_onRangesClick:function(t){if(!this.disabled){var e=this.pointerEventToTime(t),n=this.getRangeIndex(e);if(-1!=n)this.trigger("select",e,n);else{var i=this.getCurrentTime();e>=i&&this.trigger("select",-1)}}},_startOnlineRangesUpdate:function(){var t=this,e=this._rangesCache;this._rangesInt&&clearInterval(this._rangesInt),this._rangesInt=setInterval(function(){var n=t.getCurrentTime(),i=t.getDayStart(n);t.options.ranges(i,n).done(function(n){e[i]=n,t.getDayStart(t.getMinShownTime())==i&&(t._ranges=n),t.trigger("rangesupdate",n)})},x)},_moveToNextRange:function(t){var e,n=this.getShownRanges(),i=-1,s=n.length,o=-1;if(this._clearRestoreTimeout(),s>0&&n[s-1][1]>t)for(;++i<s;)if(e=n[i],e[0]>=t){o=i;break}if(-1==o){var r=this.getDayStart(t),a=this.getMaxShownTime(),l=this.getDayStart(this.getCurrentTime());if(a>l)this.trigger("archiveend");else{var u=this;this._tl(!0),this.loadRanges(r+w,r+2*w).done(function(t){t.length?u.trigger("select",t[0][0]):u._moveToNextRange(r+2*w)}).always(function(){u._tl(!1)})}}else this.trigger("select",n[i][0]);return o},_restorePlayback:function(t){var e=this.getRangeIndex(t);if(-1!=e){var n=this.getShownRanges()[e];n[1]-t>3e3?this.trigger("select",t):this._moveToNextRange(n[1])}else this._moveToNextRange(t)},_buildTip:function(t){var e=b.getPosition(t,this.$wrapper[0]),n=e[0],i=this.pointerEventToTime(t),s=this.$tip[0],o=this.$tipContent[0];s.style.left=n+"px",o.innerHTML=this.formatTime(i,!0)+" "+this.formatDate(i);var r=this.$wrapper.width(),a=this.$tipContent.outerWidth()/2,l="";n+a>r?l+=-2*a-n+r+"px":0>n-a?l+=-n+"px":l="-50%",o.style[m.TRANSFORM]="translate("+l+",0)"},_setPlayHeadPosition:function(t){t=t||this.player.getPlayTime();var e=this.$ph[0];if(t>0){var n=this.timeToCanvasX(t);e.style[m.TRANSFORM]="translate("+n+"px,0)"}else-1==e.className.indexOf("hidden")&&(e.className+=" "+g+"-hidden")},_setFutureSize:function(){var t=this.getCurrentTime(),e=this.getMaxShownTime(),n=0;if(e>t){var i=e-t;n=i/this._msppx}this.$future[0].style.width=n+"px"},_ts:function(t,e){S._ts.apply(this,arguments)&&this.trigger("change"+t,e)},_clearRestoreTimeout:function(){this._restoreTimeout&&(clearTimeout(this._restoreTimeout),this._restoreTimeout=null)}}),c.proxy(["formatTime","formatDate"],n.prototype,"player"),i.prototype={},p(s.prototype,e.Events),h(s.prototype,{_i:function(){},_bindEvents:function(){},destroy:function(){this.stopListening()}}),c.proxy(["_td","_ts"],s.prototype,e.W.prototype),d(o,s),h(o.prototype,{getCanvas:function(){return this._cns},redraw:function(){return this._frame||(this._frame=$.requestAnimFrame(this._redraw,this)),this},destroy:function(){this._frame=null,this._clear(),s.prototype.destroy.call(this)},_i:function(){var t=this,e=this.timeline,n=e.options,i=this._cns=document.createElement("canvas"),s=n.zoomAnimation&&_.any3d;i.className=g+"-zoom-"+(s?"animated":"hide"),this._setSize(),this.$container.append(i),this._ctx=i.getContext("2d"),this.listenTo(e.player,"resize",function(){setTimeout(function(){t._setSize(),t._reset()},20)}).listenTo(e,"viewreset rangesupdate",function(){t._reset()})},_setSize:function(){var t=this.timeline.getCanvasSize();this._cns.width=t.x,this._cns.height=t.y},_reset:function(){$.setPosition(this._cns,new i(0,0)),this._redraw()},_clear:function(){this._ctx.clearRect(0,0,this._cns.width,this._cns.height)},_redraw:function(){this._clear(),this._redrawRanges(),this._redrawTimeLabels()},_redrawRanges:function(){for(var t,e=this.timeline,n=e.options,i=e.getShownRanges(),s=i.length,o=this._ctx,r=n.rangeColor,a=n.timeLabelsHeight+n.timeLabelsPadding,l=this._cns.height-a,u=0,c=100;s--;)t=i[s],u=e.timeToCanvasX(t[0]),c=e.timeToCanvasX(t[1]),o.beginPath(),o.rect(u,a,c-u,l),o.fillStyle=r,o.fill()},_redrawTimeLabels:function(){var t=this.timeline,e=t.options,n=t.getCanvasSize(),i=e.timeLabelsHeight,s=this._ctx,o=t.getMinShownTime(),r=e.timeLabelsFontSize+"px Arial",a=e.timeLabelsTextColor,l=e.timeLabelsTextPaddingHor,u=e.timeLabelsFontSize+e.timeLabelsTextPaddingVert-2,c=0,d=0,h=n.x>720?12:6,f=Math.ceil(t.getSizeInMs()/h/C)*C;s.strokeStyle=e.timeLabelsLineColor,s.fillStyle=a,s.font=r;for(var p=0;h>=p;++p)d=o+p*f,c=t.timeToCanvasX(d),s.beginPath(),s.moveTo(c,0),s.lineTo(c,i),s.stroke(),s.fillText(t.formatTime(d),c+l,u)}}),d(r,s),h(r.prototype,{_i:function(){this.$back=t('<button class="'+g+"-btn "+g+"-disabled "+g+'-timeline-pan" data-direction="back"><i class="'+g+"-icon "+g+'-icon-chevron-left-invert"></i></button>').appendTo(this.$container),this.$forward=t('<button class="'+g+"-btn "+g+"-disabled "+g+'-timeline-pan" data-direction="forward"><i class="'+g+"-icon "+g+'-icon-chevron-right-invert"></i></button>').appendTo(this.$container),this._check(),this._bindEvents()},_check:function(){var t=this.timeline,e=t.getCurrentTime();if(t.disabled)this.$back.addClass(g+"-disabled").prop("disabled",!0);else if(null!==t.options.minTime){var n=t.getMinShownTime()<=t.getMinTime();this.$back[n?"addClass":"removeClass"](g+"-disabled").prop("disabled",n)}else this.$back.removeClass(g+"-disabled").prop("disabled",!1);var i=t.disabled||t.getCenter()>=e;this.$forward[i?"addClass":"removeClass"](g+"-disabled").prop("disabled",i)},_bindEvents:function(){var e=this,n=this.timeline;this.listenTo(this.timeline,"viewreset",function(){e._check()}).listenTo(this.timeline,"changedisabled",function(t){t?e.$back.add(e.$forward).addClass(g+"-disabled").prop("disabled",!0):e._check()}),this.$back.add(e.$forward).on(b.CE,function(){if(n.disabled||this.disabled)return!1;var e=t(this).data("direction"),i=n.getCenter(),s=n.getSizeInMs(),o=n.getCurrentTime(),r=Math.round(s/6),a=0;a="forward"==e?Math.min(o,i+r):Math.max(n.getMinTime(),i-r),n.setCenter(a)})}}),d(a,s),h(a.prototype,{_i:function(){var e=t('<div class="'+g+"-timeline-control "+g+'-timeline-zoom"></div>').appendTo(this.$container);this.$zoomIn=t('<button class="'+g+"-btn "+g+'-disabled" data-delta="1"><i class="'+g+"-icon "+g+'-icon-zoom-in"></i></button>').appendTo(e),this.$zoomOut=t('<button class="'+g+"-btn "+g+'-disabled" data-delta="-1"><i class="'+g+"-icon "+g+'-icon-zoom-out"></i></button>').appendTo(e),this._check(),this._bindEvents()},_check:function(){var t=this.timeline,e=t.getZoom(),n=t.options.zoomLevels.length,i=t.disabled||1>=e,s=t.disabled||e>=n;this.$zoomIn[s?"addClass":"removeClass"](g+"-disabled").prop("disabled",s),this.$zoomOut[i?"addClass":"removeClass"](g+"-disabled").prop("disabled",i)},_bindEvents:function(){var e=this,n=this.timeline;this.listenTo(this.timeline,"viewreset",function(){e._check()}).listenTo(this.timeline,"changedisabled",function(t){t?e.$zoomIn.add(e.$zoomOut).addClass(g+"-disabled").prop("disabled",!0):e._check()}),this.$zoomIn.add(e.$zoomOut).on(b.CE,function(){if(n.disabled||this.disabled)return!1;var e=t(this).data("delta");n.setZoom(n.getZoom()+e)})}}),d(l,s),h(l.prototype,{_i:function(){this.$el=t('<div class="'+g+"-btn "+g+"-timeline-control "+g+"-timeline-find "+g+'-disabled"><i class="'+g+"-icon "+g+'-icon-find"></i></div>').appendTo(this.$container),this._bindEvents()},_bindEvents:function(){var t=this,e=this.timeline,n=e.player;this.listenTo(this.timeline,"changedisabled",function(e){e?t._td(!0):t._update()}),this.listenTo(n,"engineload",function(){t._bee()}).listenTo(n,"engineunload",function(e){t.stopListening(e)}),this.$el.on(b.CE,function(){if(t.disabled)return!1;var i=n.getPlayTime();i>0&&e.setCenter(i)})},_bee:function(){var t=this,e=this.timeline.player.getEngine();this.listenTo(e,"play resume pause stop",function(e){t._td(!e)})},_update:function(){var t=this.timeline.player.getEngine();this._td(!t.isPlaying())}}),h(u.prototype,{destroy:function(){this.$el.off(this._events)},_i:function(){var t=this;this.$el.on(this._events,function(e){e.preventDefault(),e.stopPropagation(),t._onWheelScroll(e.originalEvent)})},_getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_onWheelScroll:function(t){var e=this,n=this._getWheelDelta(t),i=40;this._delta+=n,this._lastMousePos=b.getPosition(t,this.$el[0])[0],this._startTime||(this._startTime=+new Date);var s=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(function(){e._performZoom()},s)},_performZoom:function(){var t=this.timeline,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),this._delta=0,this._startTime=null,e&&t.setZoomAround(this._lastMousePos,n+e)}});var $={getTranslateString:function(t){var e=_.webkit3d,n="translate"+(e?"3d":"")+"(",i=(e?",0":"")+")";return n+t.x+"px,"+t.y+"px"+i},setPosition:function(e,n,i){t(e).data(v+"-pos",n),!i&&_.any3d?e.style[m.TRANSFORM]=$.getTranslateString(n):(e.style.left=n.x+"px",e.style.top=n.y+"px")}};!function(){function t(t){var e,n,i=["webkit","moz","o","ms"];for(e=0;e<i.length&&!n;e++)n=window[i[e]+t];return n}function e(t){var e=+new Date,i=Math.max(0,16-(e-n));return n=e+i,window.setTimeout(t,i)}var n=0,i=window.requestAnimationFrame||t("RequestAnimationFrame")||e,s=window.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};$.requestAnimFrame=function(t,n,s,o){var r=function(){t.apply(n,arguments)};return s&&i===e?void r():i.call(window,r,o)},$.cancelAnimFrame=function(t){t&&s.call(window,t)}}(),e.Timeline=n}(jQuery,window.cplayer),function(t,e){function n(){this.controls={},this.fullscreen=!1,this._src="",this._speed=1,this._engine=null,this._int=null,this._playStartTime=0,this._playTime=0,this._restoreTimeout=null,this.ui={videoWrap:null,video:null,bottom:null,splash:null,controls:null},e.W.apply(this,arguments)}var i=e.W.prototype,s=e.utils,o=s.merge,r=s.each,a=e.cssPrefix,l=200,u=e.constants.MINUTE,c=5e3;n.defaults=o({},e.W.defaults,{swfFolder:"src/libs/flowplayer",playerSwf:"flowplayer.swf",ratio:9/16,resizable:!1,i18n:{err:"Error",errStreamNotFound:"Stream not found",errCommon:"Something goes wrong"},controls:{buttonPlayPause:{position:"13",order:"0"},overlayControl:{position:"3",order:"0"},buttonLive:{position:"14",order:"0"},buttonFullscreen:{position:"14",order:"10"},buttonSpeed:{position:"13",order:"1"},content:{position:"0",order:"0"},timeIndicator:{position:"13",order:"10"},datepicker:{position:"14",order:"1"},timeline:{position:"11",order:"0"}}}),s.extend(n,e.W),s.merge(n.prototype,{create:function(){var t=this,e=this.ui;r(n.defaults.controls,function(e,n){t.controls[n]=null}),this._buildLayout(),e.videoWrap=this.$el.find("."+a+"-video-wrap"),e.video=this.$el.find("."+a+"-video"),e.splash=this.$el.find("."+a+"-splash"),e.bottom=this.$el.find("."+a+"-bottom"),e.overlayControls=e.videoWrap.find("."+a+"-controls"),e.bottomControls=e.bottom.find("."+a+"-controls");var i=this.getProvidedSources(-1);this._src=this._getSupportedSource(i),this._setVideoSize(),this._buildControls(),this._bindControlsEvents(),this.trigger("layoutready",this),this._src?this._loadEngine():this.options.debug,this._bindEvents()},play:function(){this._engine.play()},pause:function(){this._engine.pause()},resume:function(){this._engine.resume()},getProvidedSources:function(t,e){var n;return n="function"==typeof this.options.sources?this.options.sources(t,e||{}):this.options.sources},getSource:function(){return this._src},setSource:function(t){var e=o(!0,{},this._src);return this._src=t,this.trigger("beforesourcechange",this._src),this._engine&&(this.stop(),this.close(),this._engine.setClip(this._src),this.play()),this.trigger("sourcechange",this._src,e),this},setSpeed:function(t){if(t==this._speed)return this;var e=this.getSource();if(e.live)return this;var n=this.getProvidedSources(this.getPlayTime(),{speed:t});return e=this._getSupportedSource(n),e&&(this._speed=t,this.setSource(e)),this},getRatio:function(){var t=this.getSource();return t&&t.ratio||this.options.ratio},getPlayTime:function(){return this._playTime},getEngine:function(){return this._engine},restartLive:function(){this.stop(),this.close();var t=this;return setTimeout(function(){t.play()},100),this},toggleFullscreen:function(t){t="undefined"!=typeof t?t:!this.fullscreen;var n=e.Fullscreen,i=this.$el[0],s=n.getElement(),o=!1;if(t||s!=i){if(t&&s!=i){var r=this.ui.videoWrap.height();this.ui.videoWrap.data("height",r),n.request(i),o=!0}}else n.cancel(),o=!0;return this},formatTime:function(t,e){var n=new Date(t),i=s.padLeft(n.getHours(),2),o=s.padLeft(n.getMinutes(),2),r=s.padLeft(n.getSeconds(),2);return i+":"+o+(e?":"+r:"")},formatDate:function(t){var e=new Date(t),n=s.padLeft(e.getDate(),2),i=s.padLeft(e.getMonth()+1,2),o=e.getFullYear();return n+"."+i+"."+o},destroy:function(){var t=this;this._stopUpdate(),this._clearRestoreTimeout(),this._engine&&(this.stopListening(this._engine),this._engine.destroy(),this._engine=null),r(this.controls,function(e,n){e&&(e.destroy(),t.controls[n]=null)}),r(this.ui,function(e,n){e&&(e.remove(),t.ui[n]=null)}),this.$el.remove(),this.$el=null,this.disabled=!0,this.trigger("destroy",this)},getErrorContent:function(t){var e="",n=this.options.i18n;switch(t){case l:e=n.errStreamNotFound;break;default:e=n.errCommon}return e},_buildLayout:function(){this.$el=t('<div class="'+a+'"><div class="'+a+'-video-wrap" data-position="0"><div class="'+a+'-video"></div><div class="'+a+'-controls"><div data-position="1" class="'+a+'-controls-group"></div><div data-position="2" class="'+a+'-controls-group"></div></div><div data-position="3"></div></div><div class="'+a+'-bottom"><div class="'+a+'-row"><div data-position="11" class="'+a+'-controls-group"></div><div data-position="12" class="'+a+'-controls-group"></div></div><div class="'+a+'-row"><div data-position="13" class="'+a+'-controls-group"></div><div data-position="14" class="'+a+'-controls-group"></div></div></div></div>'),i.create.apply(this,arguments)},_getSupportedSource:function(t){var n,i=null,o=e.support.types;return n=s.indexBy(t,"type"),r(o,function(t){return!i&&t in n?(i=n[t],!1):void 0}),i},_setVideoSize:function(){var t=(this.$el.width(),this.getRatio());this.ui.videoWrap[0].style.paddingBottom=100*t+"%"},_loadEngine:function(){var t=e.EF;this._engine=new t(this.ui.video,{clip:this._src,debug:this.options.debug,swfFolder:this.options.swfFolder,playerSwf:this.options.playerSwf}),this._bee(),this.trigger("engineload",this._engine)},_bindEvents:function(){var t=this,n=e.Fullscreen.getEventName();this.$el.on(n,function(){t._onFullscreenChange(e.Fullscreen.enabled())})},_bee:function(){var t=this,e=this.getEngine();this.listenTo(e,"play",function(e,n){t._stopUpdate(),t._startUpdate(n)}).listenTo(e,"stop",function(){t._stopUpdate()}).listenTo(e,"bufferempty",function(e){e.live&&(t._restoreTimeout=setTimeout(function(){t.restartLive()},c))}).listenTo(e,"bufferfull",function(e){e.live&&t._clearRestoreTimeout()})},_createSplash:function(){},_buildControls:function(){for(var n=this,i=20,s={},o=this.options.controls;i--;)s[i]={};o.timeline||(o.datepicker=null,o.buttonSpeed=null),"ui"in t&&"datepicker"in t.ui||(o.datepicker=null),r(this.controls,function(t,e){var n=o[e]||null;n&&(s[n.position][n.order]=e)}),r(s,function(t,i){var s=n.$el.find("[data-position="+i+"]");r(t,function(t){var i=e[t.ucFirst()]||null,r=o[t]||null;if(i){var a=new i(n,s,r);n.controls[t]=a}})})},_bindControlsEvents:function(){var t=this;if(this.controls.timeline){var e=this.controls.timeline;this.listenTo(e,"select",function(e){if(-1==e)t._onLiveSelect();else{var n=t.getProvidedSources(e,{speed:t._speed}),i=this._getSupportedSource(n);i&&this.setSource(i)}}).listenTo(e,"archiveend",function(){})}if(this.controls.buttonLive){var n=this.controls.buttonLive;this.listenTo(n,"start",function(){t._onLiveSelect()})}},_onLiveSelect:function(){var t=this.getSource();if(t.live)this.restartLive();else{var e=this.getProvidedSources(-1);t=this._getSupportedSource(e),t&&this.setSource(t)}},_onFullscreenChange:function(t){var e,n=this.ui.videoWrap,i=this.getRatio(),s="auto",o=0;if(t){var r=this.$el.find("."+a+"-bottom").outerHeight();e=this.$el.height()-r,s=e/i+"px"}else o=100*i+"%";n[0].style.width=s,n[0].style.paddingBottom=o,this.fullscreen=t,this.trigger("fullscreen",t),this.trigger("resize")},_startUpdate:function(t){var e=this;t.duration||0,this._playStartTime=t.live?+new Date:t.startTime,this._playTime=this._playStartTime,this._int=setInterval(function(){var n=e.getEngine(),i=n.getStatus();return"undefined"==typeof i.time?void e._stopUpdate():(e._playTime=e._playStartTime+1e3*i.time*(t.live?1:e._speed),void(t.live&&(new Date).getTime()-e._playTime>u?e.restartLive():e.trigger("update",{playTime:e._playTime})))},t.live?1e3:Math.max(1e3/e._speed,200))},_stopUpdate:function(){this._int&&(clearInterval(this._int),this._int=null),this._playStartTime=0,this._playTime=0},_clearRestoreTimeout:function(){this._restoreTimeout&&(clearTimeout(this._restoreTimeout),this._restoreTimeout=null)}}),s.proxy(["stop","stopBuffering","close","isPlaying","isPaused","isStarted","getState","getStatus"],n.prototype,"_engine"),s.include(n.prototype,e.Events),e.Player=n
}(jQuery,window.cplayer);
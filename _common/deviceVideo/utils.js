define([],function(){function t(t,e,n){return String(t).padStart(e||2,n||"0")}function e(){return-(new Date).getTimezoneOffset()}function n(e){"number"==typeof e&&(e=new Date(e));var n=t(e.getUTCDate());return n+="."+t(e.getUTCMonth()+1),n+="."+e.getUTCFullYear(),n+=" ",n+=t(e.getUTCHours()),n+=":"+t(e.getUTCMinutes()),n+=":"+t(e.getUTCSeconds())}function r(t,e){var n=t.split(" ");if(2!==n.length)return null;var r=n[0].split(".").map(Number),u=n[1].split(":").map(Number);if(3!==r.length||3!==u.length)return null;var a=new Date(r[2],r[1]-1,r[0],u[0],u[1],u[2]).getTime();return isNaN(a)?null:new Date(a+6e4*e)}function u(t,e){return e.find(function(e){return e[0]<=t&&e[1]>t})}return{getDayStart:function(t){var e=new Date(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()},getHourStart:function(t){var e=new Date(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours())},getUserTzOffset:e,formatDateAsUTC:n,getMonthStartAsUTCString:function(t,e){return n(new Date(t,e-1))},getMonthEndAsUTCString:function(t,e){return n(new Date(t,e,0,23,59,59))},utcStringToDate:r,utcPeriodsToDateRanges:function(t){var n=e();return t.map(function(t){var e=r(t.begin,n),u=r(t.end,n);return null!==e&&null!==u?[e,u]:null}).filter(function(t){return null!==t})},findRangeByStartTs:u,sortKeys:function(t){return t.map(Number).sort(function(t,e){return t-e})},getSortedKeys:function(t){return this.sortKeys(Object.keys(t))},monthCacheKey:function(t,e,n){return["m",t,e,n].join(":")},dateCacheKey:function(t,e){return["d",t,e.getFullYear(),e.getMonth()+1,e.getDate()].join(":")},rangesCacheKey:function(e,n,r){return["r",t(e),n,r.getFullYear(),r.getMonth()+1,r.getDate()].join(":")},getDateParts:function(t){return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}},pad:t,pnow:function(){var t;return t=window.performance?Math._round(window.performance.now()/1e3,2):(new Date).getTime()}}});
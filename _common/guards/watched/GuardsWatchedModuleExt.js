define(["jquery","underscore","abstracts/watched/WatchedModule","_common/guards/GuardExt","_common/guards/GuardsExtCollection","./views/GuardsMapViewExt"],function(e,t,n,o,s,i){var a=n.prototype,r=n.extend({constructor:function(e){this.items=new s,this.items.dataSource=e.options.dataSource,n.apply(this,arguments)},defaults:t.extend({},a.defaults,{showBaloon:!1}),_viewClass:i,buildItemTitle:function(e){return e.get("name")},loadItems:function(t){var n=new e.Deferred;if("undefined"==typeof t){var o=this;this.items.fetch(null,{silent:!0}).done(function(){o.set("ready",!0),n.resolve()}).fail(n.reject)}else t.length?this.items.fetch(t,{silent:!0,merge:!0}).done(n.resolve).fail(n.reject):n.resolve();return n},updateItems:function(e){var t=this,n=this.items,o=[];e.forEach(function(e){o=o.concat(e.guards)}),n.forEach(function(e){o.findIndex(function(t){return t.id===e.id})<0&&t.removeItems([e.id])}),o.forEach(function(e){var t=n.get(e.id);t&&t.set(t.parse(e))})},_bindEvents:function(){var e=this;a._bindEvents.call(this),this.off("change:objViewType").off("change:bounds").on("change:bounds",function(t,n,o){o&&o.zoom&&e.get("parent").getMapsModule().setBounds(n,{maxZoom:App.get("commonBoundsMaxZoom"),padding:App.get("commonBoundsPadding")})})}});return r});
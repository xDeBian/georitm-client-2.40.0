define(["jquery","underscore","./GuardsMapView","abstracts/watched/views/WatchedView"],function(t,e,i,s){i.prototype;var a=i.extend({constructor:function(){i.apply(this,arguments)},_bindModelEvents:function(t){s.prototype._bindModelEvents.call(this,t),this.listenTo(t,"change",function(t){if(t.id in this._viewsMap&&"isVacant"in t.changed||"geoRitmObjectId"in t.changed){var e=this._viewsMap[t.id],i=t.get("isVacant"),s=t.get("geoRitmObjectId")>0;!i&&s?(e.trigger("toggleclass",{on:"busy"}),e.trigger("toggleclass",{off:"busy-ext"})):i?(e.trigger("toggleclass",{off:"busy"}),e.trigger("toggleclass",{off:"busy-ext"})):(e.trigger("toggleclass",{on:"busy-ext"}),e.trigger("toggleclass",{off:"busy"}))}})},_buildMapElement:function(t){if(t.get("lat")&&t.get("lon")){var e=["complex-icon","obj","guard",t.get("hwStatus")];t.get("isVacant")||e.push(t.get("geoRitmObjectId")>0?"busy":"busy-ext");var i=this._viewsMap[t.id]=this._maps.getWidget().buildComplexMarker({lat:t.get("lat"),lon:t.get("lon"),html:this._renderIcon(t),className:e.join(" "),dataId:t.id,animated:!1,model:t});return i}}});return a});
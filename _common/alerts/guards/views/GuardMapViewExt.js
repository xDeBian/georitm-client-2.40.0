define(["jquery","underscore","abstracts/View"],function(t,e,n){n.prototype;var i=function(t){return'<i class="i"><svg class="svg-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#smb-shield-alt"></use></svg></i><span class="name">'+e.escape(t)+"</span>"},a=n.extend({constructor:function(t){this.controller=t.controller,this._marker=null,n.apply(this,arguments)},initialize:function(){this._buildMapElement(),this._placeOnMap(),this._bindEvents()},_bindEvents:function(){var t=this.model;this.listenTo(t,"change:name",function(t,e){this._marker.trigger("settitle",{title:e})}).listenTo(t,"change:coords",function(t){this._placeOnMap(t)}).listenTo(item,"change:hwStatus",function(t,e){var n=t.previous("hwStatus");this._marker.trigger("toggleclass",{off:n,on:e})})},_buildMapElement:function(){var t=this.model,e=["complex-icon","obj","guard",t.get("hwStatus"),"busy"];this._marker=this._maps.getWidget().buildComplexMarker({lat:t.get("lat"),lon:t.get("lon"),html:i(t.get("name")),className:e.join(" "),dataId:t.id,animated:!1,model:t})},_placeOnMap:function(){var t=this.model;t.has("lat")&&t.has("lon")&&this._marker.trigger("place",{model:t,to:{lat:t.get("lat"),lon:t.get("lon")},animate:!1})}});return a});
define(["jquery","underscore","_common/mobile/MobileObject","mobile/reports/device2/views/Device2ReportView","text!../tmpl/row.html","i18n!_common/reports/nls/canReport"],function(e,t,n,i,r,s){var o=i.prototype,a=i.extend({constructor:function(){i.apply(this,arguments)},_tmplRow:t.template(r),initialize:function(){this.$el.addClass("can-report"),this._powerIndex=0,this.showSensorsSummary=!1,o.initialize.apply(this,arguments)},render:function(){var t=this.model;return o.render.apply(this,arguments).done(function(){this.tbody.find(".build-another").on("click",function(){var n=t.getSelectedCanParameters();return t.buildChildReport(e(this).data("objectid"),n[e(this).data("sensor")]),!1})}.bind(this))},_setSensorsSummary:function(){var e=this.model.get("footer");if(e)for(var n=24,i=t.indexBy(e.devices||[],"devNo"),r="",o=t.values(s.names),a=t.values(s.states),d=0,l=0;n>l;++l)d=l+1,this.model.has("dev"+d)&&(r=o[l]+(a[l]?" "+a[l]:""),this.sensors.push({name:r,time:i[d].periodOn,index:d}))},_getDeviceSensorsTime:function(e){var n=this.sensors.length,i=null;if(t.keys(e).length)for(i=new Array(n);n--;)i[n]=e[this.sensors[n].index].periodOn;return i}});return a});
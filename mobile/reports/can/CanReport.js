define(["underscore","jface","_common/reports/Report","../device2/Device2Report","./views/CanReportView"],function(e,t,i,r,s){var n=r.extend({url:App.getBaseUrl()+"reports/CANDEVICERUN/",constructor:function(){this._sensorsNumber=24,this._children={},r.apply(this,arguments)},initialize:function(){i.prototype.initialize.call(this,s),this._normalizeParams(),this._storeUserData()},getSelectedCanParameters:function(){for(var e=[],t=[112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135],i=0;i<this._sensorsNumber;i++)this.has("dev"+(i+1))&&e.push(t[i]);return e},buildChildReport:function(i,r){var s=i+"_"+r;if(s in this._children){if(null===this._children[s])return;return this._module.viewReport(this._children[s].id,this.id),void 0}this._children[s]=null;var n={objectId:[i],type:"discretes",source:this,metrics:["switch","on","off","history"],parameterNums:[r]};e.each(["tzId","startTime","endTime","dur"],function(e){n[e]=this.get(e)}.bind(this)),this.has("timeRanges")&&(n.timeRanges=this.get("timeRanges")),this.trigger("build:start"),App.trigger("needreport","mobile",n),t.growl.open(this.getTexts().reportBuildingHasStarted)},registerChild:function(e){var t=e.get("objectId"),i=e.get("parameterNums"),r=t[0]+"_"+i[0];this.listenToOnce(e,"sync",function(){this._children[r]=e,this.trigger("build:finish")}.bind(this)).listenTo(e,"remove",function(){delete this._children[r]}.bind(this))},_storeUserData:function(){this.setUserData("dur",this.get("dur"));var e=this._getChecked.call(this);this.setUserData("checked",e)}});return n});
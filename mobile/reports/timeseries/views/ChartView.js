define(["jquery","underscore","_libs/charts/Chart","abstracts/View"],function(t,i,e,s){function n(t){return(t.actualVisibleMaximum-t.actualVisibleMinimum)/t.width}var r=s.extend({constructor:function(t){this.isAlone=t.alone===!0,this.isOriginalyAlone=this.isAlone,this.isVisible=!0,this.isMouseOver=!1,this.singleParam=t.singleParam,this.parent=null,this.$chart=null,this._chart=null,this._toggleParam=this._toggleParam.bind(this),s.apply(this,arguments)},initialize:function(t){this.parent=t.parent,this.$chart=this.$el.find(".chart-content"),this.isOriginalyAlone||(this.$chart.data("resizable",!1),this.listenTo(App,"layoutchange",function(t){t&&t.leftWidth>0&&this.isVisible&&this._resize()})),this.render(),this._bindEvents()},render:function(){},getJqChart:function(){return this._chart.getChart()},getXAxis:function(){return this.getJqChart().axes.items[0]},getYAxis:function(){return this.getJqChart().axes.items[1]},getYAxisWidth:function(){return this.getYAxis().width},getTsByXY:function(t,i){var e=this.$chart.offset(),s=this.getJqChart().gridArea,r=e.top+s.y,a=this.getXAxis(),h=a.x+e.left,o=t-h,u=i-r;if(0>o||0>u||o>a.width||u>s.height)return 0;var l=n(a);return a.actualVisibleMinimum+l*o},setVisibleRange:function(t){var i=this.getXAxis();i.visibleMinimum=i.options.visibleMinimum=t[0],i.visibleMaximum=i.options.visibleMaximum=t[1],i.chart.partialDelayedUpdate(),i._zoom()},resetZoom:function(){this.getXAxis().resetZoom(),this.getJqChart().partialDelayedUpdate()},_bindEvents:function(){this.listenTo(this.model,"param:toggle",this._toggleParam)},_getCommonChartOptions:function(){var t={toolbar:{visibility:"auto",resetZoomButtonVisible:!0,zoomingButtonVisible:!1,panningButtonVisible:!1,resetZoomTooltipText:"1:1"},noDataMessage:{text:this.model.getTexts().errSelectAtLeastOneParameter,font:"16px sans-serif"}};return t.tooltips={disabled:!0,highlighting:!1},t},_getDateTimeAxisOptions:function(){var t=this.model.get("startTime"),i=this.model.get("endTime"),s=e.getDefaults(),n=s.axes[0];return n.minimum=t,n.maximum=i,n},_update:function(){this.$chart.jqChart("update")},_updateSeries:function(){},_getSeries:function(){return this.$chart.jqChart("option","series")},_setSeries:function(t){return this.$chart.jqChart("option","series",t)},_toggleParam:function(){},_calcWidth:function(){return this.$chart.outerWidth()},_resize:function(){this.$chart.jqChart("option","width",this._calcWidth())}});return r});